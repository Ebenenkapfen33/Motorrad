<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apex Rider Suite - All-in-One</title>
    
    <style>
        /* CSS BEREICH */
        :root {
            --bg: #0a0a0a;
            --card: #1c1c1c;
            --accent: #ff4d00;
            --text: #ffffff;
            --success: #39ff14;
        }

        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        header { 
            padding: 15px; 
            text-align: center; 
            border-bottom: 2px solid var(--accent);
            background: #000;
        }

        header h1 { margin: 0; font-size: 1.2rem; letter-spacing: 2px; }

        main { flex: 1; overflow-y: auto; padding-bottom: 80px; }

        .view { padding: 20px; }
        .hidden { display: none; }

        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent);
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        .input-group { margin-bottom: 15px; }
        
        input {
            width: 100%;
            padding: 12px;
            background: #333;
            border: 1px solid #444;
            color: white;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1rem;
        }

        .btn-action, .btn-sos {
            width: 100%; padding: 15px; border: none; border-radius: 8px; 
            font-weight: bold; cursor: pointer; font-size: 1rem; transition: 0.2s;
        }
        .btn-action { background: var(--accent); color: white; margin-top: 10px; }
        .btn-sos { background: #d00; color: white; }
        .btn-action:active { transform: scale(0.98); opacity: 0.8; }

        .progress-container { background: #333; height: 12px; border-radius: 6px; margin: 15px 0 5px 0; }
        .progress-fill { background: var(--success); height: 100%; border-radius: 6px; transition: 1s ease-out; width: 0%; }

        .bike-display { 
            height: 120px; display: flex; flex-direction: column; 
            justify-content: center; align-items: center; font-size: 60px; 
            margin: 20px 0;
        }
        #bike-icon { transition: transform 0.3s ease; transform-origin: bottom center; }
        .ground-line { width: 120px; height: 3px; background: #555; border-radius: 2px; }

        .tab-bar {
            position: fixed; bottom: 0; width: 100%; display: flex; 
            background: #000; padding: 10px 0; border-top: 1px solid #222;
            justify-content: space-around;
        }
        .tab-bar button { 
            background: none; border: none; color: #888; 
            font-size: 0.7rem; cursor: pointer; flex: 1;
        }
        .tab-bar button.active { color: var(--accent); font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <h1>APEX <span id="view-title" style="color:var(--accent)">DASHBOARD</span></h1>
    </header>

    <main id="app-content">
        <section id="dashboard" class="view">
            <div class="card">
                <h3>Bike Status</h3>
                <p id="service-info" style="margin:0">Kilometerstand: --</p>
                <div class="progress-container">
                    <div id="service-bar" class="progress-fill"></div>
                </div>
                <small style="color:#888">N√§chster Service: 15.000 km</small>
            </div>
            <div class="card">
                <h3>Tour-Wetter</h3>
                <p style="margin:0; font-size: 1.2rem;">‚òÄÔ∏è 24¬∞C</p>
                <p style="color: var(--success); margin: 5px 0 0 0;">Ideal f√ºr die Hausrunde!</p>
            </div>
        </section>

        <section id="physics" class="view hidden">
            <div class="card">
                <h3>Schr√§glagen-Rechner</h3>
                <div class="input-group">
                    <label>Speed: <span id="v-val">50</span> km/h</label>
                    <input type="range" id="speed" min="10" max="200" value="50" oninput="updatePhysics()">
                </div>
                <div class="input-group">
                    <label>Radius: <span id="r-val">25</span> m</label>
                    <input type="range" id="radius" min="5" max="100" value="25" oninput="updatePhysics()">
                </div>
                <div class="bike-display">
                    <div id="bike-icon">üèçÔ∏è</div>
                    <div class="ground-line"></div>
                </div>
                <h2 id="lean-result" style="text-align: center; margin: 0; color: var(--accent);">0¬∞</h2>
            </div>
        </section>

        <section id="fuel" class="view hidden">
            <div class="card">
                <h3>Sprit-Rechner</h3>
                <input type="number" id="trip-km" placeholder="Gefahrene km (z.B. 240)">
                <input type="number" id="trip-liters" placeholder="Liter getankt (z.B. 12)" style="margin-top:10px">
                <button class="btn-action" onclick="calcConsumption()">BERECHNEN</button>
                <h3 id="consumption-history" style="text-align:center; margin-top:20px; color: var(--success);"></h3>
            </div>
        </section>

        <section id="sos" class="view hidden">
            <div class="card" style="border-left-color: #d00; text-align: center;">
                <h2 style="color: #d00; margin-top:0">NOTFALL INFO</h2>
                <hr style="border: 0; border-top: 1px solid #333; margin: 15px 0;">
                <p><strong>Blutgruppe:</strong> A Rh+</p>
                <p><strong>Notfall-Kontakt:</strong> +49 151 000000</p>
                <button class="btn-sos" onclick="getLocation()">MEIN STANDORT</button>
                <p id="location-display" style="margin-top:15px; font-family: monospace; font-size: 0.9rem; color: #aaa;"></p>
            </div>
        </section>
    </main>

    <nav class="tab-bar">
        <button onclick="showView('dashboard', this)" class="active">üè†<br>Dash</button>
        <button onclick="showView('physics', this)">üìê<br>Lean</button>
        <button onclick="showView('fuel', this)">‚õΩ<br>Fuel</button>
        <button onclick="showView('sos', this)">üÜò<br>SOS</button>
    </nav>

    <script>
        /* JAVASCRIPT BEREICH */

        // Navigation
        function showView(viewId, btn) {
            document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
            document.querySelectorAll('.tab-bar button').forEach(b => b.classList.remove('active'));
            
            document.getElementById(viewId).classList.remove('hidden');
            btn.classList.add('active');
            document.getElementById('view-title').innerText = viewId.toUpperCase();
        }

        // Schr√§glage (Physik)
        function updatePhysics() {
            const vKmh = parseFloat(document.getElementById('speed').value);
            const r = parseFloat(document.getElementById('radius').value);
            
            document.getElementById('v-val').innerText = vKmh;
            document.getElementById('r-val').innerText = r;

            const vMs = vKmh / 3.6;
            const g = 9.81;
            
            // Formel: alpha = arctan(v^2 / (g * r))
            const angleRad = Math.atan((vMs * vMs) / (g * r));
            let angleDeg = (angleRad * 180) / Math.PI;
            
            // Limit f√ºr die Anzeige (mehr als 65 Grad ist meist Sturz)
            if(angleDeg > 65) angleDeg = 65;

            document.getElementById('lean-result').innerText = Math.round(angleDeg) + "¬∞";
            document.getElementById('bike-icon').style.transform = `rotate(${angleDeg}deg)`;
        }

        // Spritrechner
        function calcConsumption() {
            const km = document.getElementById('trip-km').value;
            const liters = document.getElementById('trip-liters').value;
            if(km > 0 && liters > 0) {
                const avg = (liters / km) * 100;
                document.getElementById('consumption-history').innerText = avg.toFixed(2) + " L / 100km";
                localStorage.setItem('bike_consumption', avg.toFixed(2));
            }
        }

        // GPS Standort
        function getLocation() {
            const out = document.getElementById('location-display');
            if (navigator.geolocation) {
                out.innerText = "Suche Satelliten...";
                navigator.geolocation.getCurrentPosition(pos => {
                    out.innerText = "LAT: " + pos.coords.latitude.toFixed(5) + "\nLON: " + pos.coords.longitude.toFixed(5);
                }, () => {
                    out.innerText = "GPS Zugriff verweigert.";
                });
            } else {
                out.innerText = "GPS nicht unterst√ºtzt.";
            }
        }

        // Start-Animation / Setup
        window.onload = () => {
            setTimeout(() => {
                document.getElementById('service-bar').style.width = '83%';
                document.getElementById('service-info').innerText = 'Kilometerstand: 12.450 km';
            }, 500);
            updatePhysics();
        };
    </script>
</body>
</html>
