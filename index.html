<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Apex Fleet Manager</title>
    <style>
        :root { --accent: #ff4d00; --bg: #000; --card: #121212; --text: #eee; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        header { padding: 15px; text-align: center; border-bottom: 2px solid var(--accent); font-weight: bold; background: #000; }
        main { flex: 1; overflow-y: auto; padding: 15px; padding-bottom: 90px; }
        
        .view { display: none; }
        .view.active { display: block; }

        .card { background: var(--card); border-radius: 12px; padding: 15px; margin-bottom: 20px; border-left: 4px solid var(--accent); }
        h2 { color: var(--accent); font-size: 0.9rem; margin: 0 0 10px 0; text-transform: uppercase; }
        
        input { width: 100%; padding: 14px; background: #1a1a1a; border: 1px solid #333; color: #fff; border-radius: 8px; margin: 5px 0 10px 0; font-size: 16px; }
        button { width: 100%; padding: 14px; background: var(--accent); color: #fff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .btn-del { background: #222; color: #ff4444; border: 1px solid #444; margin-top: 8px; font-size: 0.75rem; width: auto; padding: 5px 10px; }

        .nav { position: fixed; bottom: 0; width: 100%; height: 75px; background: #000; display: flex; border-top: 1px solid #333; z-index: 1000; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #555; cursor: pointer; }
        .nav-item.active { color: var(--accent); }

        .entry { background: #1a1a1a; padding: 12px; border-radius: 8px; margin-top: 10px; border: 1px solid #333; }
        .check-item { display: flex; align-items: center; margin-bottom: 10px; }
        .check-item input { width: 25px; margin-right: 10px; }
    </style>
</head>
<body>

<header id="top-title">MOTORRAD</header>

<main>
    <div id="view-bike" class="view active">
        <div class="card">
            <h2 id="name-bike">Mein Bike</h2>
            <div id="weather-b">Wetter l√§dt...</div>
        </div>

        <div class="card">
            <h2>üìù Logbuch (KM)</h2>
            <input type="number" id="in-km-bike" placeholder="Gefahrene KM eingeben...">
            <button onclick="saveLog('bike')">Fahrt Speichern</button>
            <div id="logs-bike"></div>
        </div>

        <div class="card">
            <h2>‚õΩ Tanken</h2>
            <input type="number" step="0.01" id="in-price-bike" placeholder="Preis (z.B. 14.92) ‚Ç¨">
            <button onclick="saveTank('bike')">Eintrag Speichern</button>
            <div id="tanks-bike"></div>
        </div>

        <div class="card">
            <h2>üõ°Ô∏è Bike-Check</h2>
            <div class="check-item"><input type="checkbox"> Kettenspannung</div>
            <div class="check-item"><input type="checkbox"> Reifendruck</div>
            <div class="check-item"><input type="checkbox"> Helm-Visier</div>
            <button onclick="alert('Check registriert!')">Check Quittieren</button>
        </div>
    </div>

    <div id="view-car" class="view">
        <div class="card">
            <h2 id="name-car">Mein Auto</h2>
            <div id="weather-c">Wetter l√§dt...</div>
        </div>

        <div class="card">
            <h2>üìù Logbuch (KM)</h2>
            <input type="number" id="in-km-car" placeholder="Gefahrene KM eingeben...">
            <button onclick="saveLog('car')">Fahrt Speichern</button>
            <div id="logs-car"></div>
        </div>

        <div class="card">
            <h2>‚õΩ Tanken</h2>
            <input type="number" step="0.01" id="in-price-car" placeholder="Preis (z.B. 14.92) ‚Ç¨">
            <button onclick="saveTank('car')">Eintrag Speichern</button>
            <div id="tanks-car"></div>
        </div>

        <div class="card">
            <h2>üîß Auto-Service</h2>
            <div class="check-item"><input type="checkbox"> √ñlstand pr√ºfen</div>
            <div class="check-item"><input type="checkbox"> Wischwasser voll</div>
            <div class="check-item"><input type="checkbox"> Reifendruck</div>
            <button onclick="alert('Auto-Service registriert!')">Check Quittieren</button>
        </div>
    </div>

    <div id="view-set" class="view">
        <div class="card">
            <h2>üé® Farbe w√§hlen</h2>
            <input type="color" id="color-pick" onchange="updateTheme(this.value)">
        </div>
        <div class="card">
            <h2>üèéÔ∏è Namen √§ndern</h2>
            <input type="text" id="set-bike" placeholder="Name Motorrad">
            <input type="text" id="set-car" placeholder="Name Auto">
            <button onclick="updateNames()">Speichern</button>
        </div>
        <button onclick="resetData()" style="background:#f00; margin-top:20px;">RESET (ALLES L√ñSCHEN)</button>
    </div>
</main>

<div class="nav">
    <div class="nav-item active" onclick="show('bike', this)"><span>üèçÔ∏è</span><label>Bike</label></div>
    <div class="nav-item" onclick="show('car', this)"><span>üöó</span><label>Auto</label></div>
    <div class="nav-item" onclick="show('set', this)"><span>‚öôÔ∏è</span><label>Setup</label></div>
</div>

<script>
    // Zwei getrennte Datenspeicher
    let bikeData = JSON.parse(localStorage.getItem('APEX_BIKE_V3')) || { name: "Motorrad", logs: [], tanks: [] };
    let carData = JSON.parse(localStorage.getItem('APEX_CAR_V3')) || { name: "Auto", logs: [], tanks: [] };
    let themeColor = localStorage.getItem('APEX_THEME') || "#ff4d00";

    function sync() {
        localStorage.setItem('APEX_BIKE_V3', JSON.stringify(bikeData));
        localStorage.setItem('APEX_CAR_V3', JSON.stringify(carData));
        localStorage.setItem('APEX_THEME', themeColor);
        render();
    }

    function show(view, el) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById('view-' + view).classList.add('active');
        el.classList.add('active');
        document.getElementById('top-title').innerText = view.toUpperCase();
    }

    function saveLog(type) {
        const input = document.getElementById('in-km-' + type);
        const val = parseInt(input.value);
        if(val) {
            const entry = { id: Date.now(), km: val, date: new Date().toLocaleDateString() };
            if(type === 'bike') bikeData.logs.unshift(entry); else carData.logs.unshift(entry);
            input.value = "";
            sync();
        }
    }

    function saveTank(type) {
        const input = document.getElementById('in-price-' + type);
        const val = parseFloat(input.value);
        if(val) {
            const entry = { id: Date.now(), price: val.toFixed(2), date: new Date().toLocaleDateString() };
            if(type === 'bike') bikeData.tanks.unshift(entry); else carData.tanks.unshift(entry);
            input.value = "";
            sync();
        }
    }

    function deleteItem(type, cat, id) {
        if(type === 'bike') bikeData[cat] = bikeData[cat].filter(i => i.id !== id);
        else carData[cat] = carData[cat].filter(i => i.id !== id);
        sync();
    }

    function updateTheme(c) { themeColor = c; sync(); }
    function updateNames() {
        bikeData.name = document.getElementById('set-bike').value || bikeData.name;
        carData.name = document.getElementById('set-car').value || carData.name;
        sync();
    }
    function resetData() { if(confirm("Wirklich alles l√∂schen?")) { localStorage.clear(); location.reload(); } }

    function render() {
        document.documentElement.style.setProperty('--accent', themeColor);
        document.getElementById('name-bike').innerText = bikeData.name;
        document.getElementById('name-car').innerText = carData.name;

        // Render Motorrad Logs & Tanks
        document.getElementById('logs-bike').innerHTML = bikeData.logs.map(l => `
            <div class="entry"><b>${l.date}</b>: ${l.km} KM <button class="btn-del" onclick="deleteItem('bike','logs',${l.id})">L√∂schen</button></div>`).join('');
        document.getElementById('tanks-bike').innerHTML = bikeData.tanks.map(t => `
            <div class="entry"><b>${t.date}</b>: ${t.price} ‚Ç¨ <button class="btn-del" onclick="deleteItem('bike','tanks',${t.id})">L√∂schen</button></div>`).join('');

        // Render Auto Logs & Tanks
        document.getElementById('logs-car').innerHTML = carData.logs.map(l => `
            <div class="entry"><b>${l.date}</b>: ${l.km} KM <button class="btn-del" onclick="deleteItem('car','logs',${l.id})">L√∂schen</button></div>`).join('');
        document.getElementById('tanks-car').innerHTML = carData.tanks.map(t => `
            <div class="entry"><b>${t.date}</b>: ${t.price} ‚Ç¨ <button class="btn-del" onclick="deleteItem('car','tanks',${t.id})">L√∂schen</button></div>`).join('');
    }

    window.onload = render;
</script>
</body>
</html>
